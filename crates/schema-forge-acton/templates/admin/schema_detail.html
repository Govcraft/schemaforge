{% extends "admin/base.html" %}

{% block title %}{{ schema.name }} - SchemaForge Admin{% endblock %}

{% block content %}
<div class="breadcrumbs text-sm">
    <ul>
        <li><a href="/admin/">Dashboard</a></li>
        <li>{{ schema.name }}</li>
    </ul>
</div>
<div class="flex justify-between items-center mb-6">
    <div>
        <h2>{{ schema.name }}</h2>
        <div class="text-sm text-base-content/60 mt-1">
            {% if let Some(v) = schema.version %}Version {{ v }} &middot; {% endif %}
            {{ schema.fields.len() }} fields
            {% if let Some(df) = schema.display_field %} &middot; Display: {{ df }}{% endif %}
        </div>
    </div>
    <div class="flex gap-1.5">
        <a href="/admin/schemas/{{ schema.url_name }}/entities" class="btn btn-primary">View Entities</a>
        <a href="/admin/schemas/{{ schema.url_name }}/edit" class="btn btn-ghost">Edit Schema</a>
        <button class="btn btn-error"
                hx-delete="/admin/schemas/{{ schema.url_name }}"
                hx-confirm="Delete schema '{{ schema.name }}'? This cannot be undone."
                hx-target="body"
                hx-push-url="/admin/">Delete</button>
    </div>
</div>

<div class="card card-border bg-base-200 p-0 overflow-hidden">
    <div class="overflow-x-auto">
        <table class="table">
            <thead>
                <tr>
                    <th>Field</th>
                    <th>Type</th>
                    <th>Required</th>
                    <th>Default</th>
                </tr>
            </thead>
            <tbody>
                {% for field in schema.fields %}
                <tr>
                    <td><code>{{ field.name }}</code></td>
                    <td><span class="badge badge-info font-mono">{{ field.type_label }}</span></td>
                    <td>
                        {% if field.required %}
                        <span class="badge badge-accent badge-sm">required</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if let Some(dv) = field.default_value %}
                        <code>{{ dv }}</code>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
