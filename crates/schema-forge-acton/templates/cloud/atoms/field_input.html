<div class="sf-form-group">
    <label class="sf-form-label" for="field-{{ field.name }}">
        {{ field.label }}{% if field.required %} *{% endif %}
    </label>
    {% if field.input_type == "text" %}
    <input type="text" id="field-{{ field.name }}" name="{{ field.name }}" class="sf-form-input"
        {% if let Some(val) = field.current_value %}value="{{ val }}"{% else if let Some(def) = field.default_value %}value="{{ def }}"{% endif %}
        {% for (key, val) in field.attrs %}{{ key }}="{{ val }}" {% endfor %}
        {% if field.required %}required{% endif %}>
    {% else if field.input_type == "textarea" %}
    <textarea id="field-{{ field.name }}" name="{{ field.name }}" class="sf-form-input sf-form-textarea"
        {% for (key, val) in field.attrs %}{{ key }}="{{ val }}" {% endfor %}
        {% if field.required %}required{% endif %}>{% if let Some(val) = field.current_value %}{{ val }}{% else if let Some(def) = field.default_value %}{{ def }}{% endif %}</textarea>
    {% else if field.input_type == "number" %}
    <input type="number" id="field-{{ field.name }}" name="{{ field.name }}" class="sf-form-input"
        {% if let Some(val) = field.current_value %}value="{{ val }}"{% else if let Some(def) = field.default_value %}value="{{ def }}"{% endif %}
        {% for (key, val) in field.attrs %}{{ key }}="{{ val }}" {% endfor %}
        {% if field.required %}required{% endif %}>
    {% else if field.input_type == "checkbox" %}
    <input type="hidden" name="{{ field.name }}" value="false">
    <input type="checkbox" id="field-{{ field.name }}" name="{{ field.name }}" value="true" class="sf-form-checkbox"
        {% if let Some(val) = field.current_value %}{% if val == "true" %}checked{% endif %}{% else if let Some(def) = field.default_value %}{% if def == "true" %}checked{% endif %}{% endif %}>
    {% else if field.input_type == "datetime-local" %}
    <input type="datetime-local" id="field-{{ field.name }}" name="{{ field.name }}" class="sf-form-input"
        {% if let Some(val) = field.current_value %}value="{{ val }}"{% endif %}
        {% if field.required %}required{% endif %}>
    {% else if field.input_type == "select" %}
    {% if let Some(target) = field.relation_target %}
    <select id="field-{{ field.name }}" name="{{ field.name }}" class="sf-form-input sf-form-select"
        {% if field.multiple %}multiple{% endif %}
        hx-get="/app/{{ target }}/relation-options/{{ field.name }}"
        hx-trigger="load"
        hx-swap="innerHTML"
        {% if field.required %}required{% endif %}>
        <option>Loading...</option>
    </select>
    {% else %}
    <select id="field-{{ field.name }}" name="{{ field.name }}" class="sf-form-input sf-form-select"
        {% if field.multiple %}multiple{% endif %}
        {% if field.required %}required{% endif %}>
        <option value="">-- Select --</option>
        {% for (val, label) in field.options %}
        <option value="{{ val }}"{% if let Some(cv) = field.current_value %}{% if cv == val %} selected{% endif %}{% endif %}>{{ label }}</option>
        {% endfor %}
    </select>
    {% endif %}
    {% else if field.input_type == "json" %}
    <textarea id="field-{{ field.name }}" name="{{ field.name }}" class="sf-form-input sf-form-textarea" style="font-family: monospace;"
        {% for (key, val) in field.attrs %}{{ key }}="{{ val }}" {% endfor %}
        {% if field.required %}required{% endif %}>{% if let Some(val) = field.current_value %}{{ val }}{% endif %}</textarea>
    {% else if field.input_type == "composite" %}
    {% include "cloud/atoms/composite.html" %}
    {% else if field.input_type == "array" %}
    <textarea id="field-{{ field.name }}" name="{{ field.name }}" class="sf-form-input sf-form-textarea"
        placeholder="One value per line"
        {% if field.required %}required{% endif %}>{% if let Some(val) = field.current_value %}{{ val }}{% endif %}</textarea>
    {% else %}
    <input type="text" id="field-{{ field.name }}" name="{{ field.name }}" class="sf-form-input"
        {% if let Some(val) = field.current_value %}value="{{ val }}"{% else if let Some(def) = field.default_value %}value="{{ def }}"{% endif %}
        {% if field.required %}required{% endif %}>
    {% endif %}
</div>
